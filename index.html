<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ—ºï¸ Michi's Quest â€” Schatzjagd 45</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="style.css?v=3">
</head>
<body>
  <div class="stars"></div>
  <div class="container">

    <!-- PASSWORD GATE -->
    <section id="gate" class="screen active">
      <div class="card">
        <div class="icon">ğŸ—ºï¸</div>
        <h1>Michi's Quest</h1>
        <p class="subtitle">Schatzjagd 45</p>
        <p class="flavor">Ein digitales Abenteuer wartet auf dich, tapferer Held.<br>Aber zuerst... beweise, dass du es bist!</p>
        <div class="input-group">
          <label for="password">Gib das Passwort ein:</label>
          <input type="text" id="password" placeholder="ğŸ”‘ Dein Geburtstag (TTMM)" autocomplete="off" inputmode="numeric" maxlength="4">
          <button onclick="checkPassword()" class="btn">âš”ï¸ Quest starten</button>
        </div>
        <p id="gate-error" class="error hidden">Falsches Passwort! Versuch's nochmal.</p>
      </div>
    </section>

    <!-- STATION 1: MAP OF FRANCE -->
    <section id="station1" class="screen">
      <div class="card">
        <div class="station-header">
          <span class="station-badge">Station 1 / 5</span>
          <div class="progress"><div class="progress-fill" style="width: 0%"></div></div>
        </div>
        <div class="icon">âš”ï¸</div>
        <h2>Character Creation<br><small>â€” Die Hugenotten â€”</small></h2>
        <div class="story-box">
          <p>Willkommen, <strong>Michi</strong>! Dein Abenteuer beginnt in Erlangen â€” einer Stadt, die von franzÃ¶sischen FlÃ¼chtlingen geprÃ¤gt wurde.</p>
          <p>Im Jahr 1685 widerrief der franzÃ¶sische KÃ¶nig ein berÃ¼hmtes Edikt, das den Protestanten Religionsfreiheit gewÃ¤hrt hatte. Dieses Edikt trug den Namen einer franzÃ¶sischen Stadt.</p>
        </div>
        <div class="riddle-box">
          <p class="riddle">ğŸ—ºï¸ Finde die Stadt auf der Karte!<br><em>Klicke auf die Stadt, die dem Edikt ihren Namen gab.</em></p>
        </div>
        <div id="map1" class="map-container"></div>
        <p id="error1" class="error hidden">Das ist nicht die richtige Stadt... Denk an die Hugenotten! ğŸ”</p>
        <div id="success1" class="success-box hidden">
          <p>âœ… <strong>Richtig! Das Edikt von Nantes!</strong><br>1598 gewÃ¤hrte es Religionsfreiheit â€” 1685 wurde es widerrufen.</p>
        </div>
      </div>
    </section>

    <!-- STATION 2: MAP OF BRAZIL -->
    <section id="station2" class="screen">
      <div class="card">
        <div class="station-header">
          <span class="station-badge">Station 2 / 5</span>
          <div class="progress"><div class="progress-fill" style="width: 20%"></div></div>
        </div>
        <div class="icon">ğŸŒŠ</div>
        <h2>Side Quest<br><small>â€” Across the Atlantic â€”</small></h2>
        <div class="story-box">
          <p>Die Hugenotten flohen nicht nur nach Deutschland â€” manche gingen sogar nach <strong>Brasilien</strong>!</p>
          <p>In den 1550er Jahren versuchten franzÃ¶sische Kolonisten, eine Kolonie namens <strong>â€France Antarctique"</strong> in einer berÃ¼hmten brasilianischen Bucht zu grÃ¼nden.</p>
        </div>
        <div class="riddle-box">
          <p class="riddle">ğŸ—ºï¸ Finde die Bucht auf der Karte!<br><em>Wo lag â€France Antarctique"?</em></p>
        </div>
        <div id="map2" class="map-container"></div>
        <p id="error2" class="error hidden">Das ist nicht die richtige Bucht... Such mal nach â€France Antarctique" ğŸŒ</p>
        <div id="success2" class="success-box hidden">
          <p>âœ… <strong>Richtig! Die Bucht von Guanabara!</strong><br>Heute besser bekannt als die Bucht von Rio de Janeiro. ğŸ–ï¸</p>
        </div>
      </div>
    </section>

    <!-- STATION 3: COCKTAIL BUILDER -->
    <section id="station3" class="screen">
      <div class="card">
        <div class="station-header">
          <span class="station-badge">Station 3 / 5</span>
          <div class="progress"><div class="progress-fill" style="width: 40%"></div></div>
        </div>
        <div class="icon">ğŸ¹</div>
        <h2>The Virtual Tavern<br><small>â€” ğŸº Die VR-Kneipe â€”</small></h2>
        <div class="story-box">
          <p>Du setzt deine <strong>Meta Quest</strong> auf und betrittst eine virtuelle Taverne. Der Wirt begrÃ¼ÃŸt dich:</p>
          <p><em>â€Willkommen! In Erlangen kennen wir uns mit Bier aus â€” Bergkirchweih! Aber heute mixen wir Brasiliens berÃ¼hmtesten Cocktail!"</em></p>
        </div>
        <div class="riddle-box">
          <p class="riddle">ğŸ¹ WÃ¤hle die richtigen 4 Zutaten!<br><em>Klicke auf die Zutaten fÃ¼r Brasiliens National-Cocktail.</em></p>
        </div>
        <div class="ingredient-grid" id="ingredients">
          <div class="ingredient" data-name="lime" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ‹</span>
            <span class="ingredient-label">Limetten</span>
          </div>
          <div class="ingredient" data-name="sugar" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ¬</span>
            <span class="ingredient-label">Zucker</span>
          </div>
          <div class="ingredient" data-name="vodka" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ¸</span>
            <span class="ingredient-label">Vodka</span>
          </div>
          <div class="ingredient" data-name="cachaca" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ¥ƒ</span>
            <span class="ingredient-label">CachaÃ§a</span>
          </div>
          <div class="ingredient" data-name="ice" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ§Š</span>
            <span class="ingredient-label">Eis</span>
          </div>
          <div class="ingredient" data-name="tequila" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸŒµ</span>
            <span class="ingredient-label">Tequila</span>
          </div>
          <div class="ingredient" data-name="mint" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸŒ¿</span>
            <span class="ingredient-label">Minze</span>
          </div>
          <div class="ingredient" data-name="rum" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ´â€â˜ ï¸</span>
            <span class="ingredient-label">Rum</span>
          </div>
          <div class="ingredient" data-name="tonic" onclick="toggleIngredient(this)">
            <span class="ingredient-icon">ğŸ«§</span>
            <span class="ingredient-label">Tonic Water</span>
          </div>
        </div>
        <div class="glass-display">
          <div class="glass" id="glass">
            <div class="glass-contents" id="glass-contents"></div>
            <div class="glass-label">ğŸ¹</div>
          </div>
          <p class="glass-count"><span id="ingredient-count">0</span> / 4 Zutaten</p>
        </div>
        <button onclick="checkCocktail()" class="btn" id="mix-btn" disabled>ğŸ¹ Mixen!</button>
        <p id="error3" class="error hidden">Das schmeckt nicht richtig... Versuch's nochmal! ğŸ¤¢</p>
        <div id="success3" class="success-box hidden">
          <p>âœ… <strong>Perfekt! Eine Caipirinha!</strong><br>Limetten, Zucker, Eis und CachaÃ§a â€” SaÃºde! ğŸ‡§ğŸ‡·</p>
        </div>
      </div>
    </section>

    <!-- STATION 4: LETTER SCRAMBLE -->
    <section id="station4" class="screen">
      <div class="card">
        <div class="station-header">
          <span class="station-badge">Station 4 / 5</span>
          <div class="progress"><div class="progress-fill" style="width: 60%"></div></div>
        </div>
        <div class="icon">ğŸ‰</div>
        <h2>Boss Fight<br><small>â€” The Knowledge Dragon â€”</small></h2>
        <div class="story-box">
          <p>Ein mÃ¤chtiger <strong>Wissensdrache</strong> versperrt dir den Weg! ğŸ‰</p>
          <p><em>â€Die Friedrich-Alexander-UniversitÃ¤t Erlangen-NÃ¼rnberg ist nach zwei Markgrafen benannt. Friedrich kenne ich... aber wie hieÃŸ der andere?"</em></p>
          <p>Sein Name ist auch der eines berÃ¼hmten mazedonischen Eroberers... ğŸ‘‘</p>
        </div>
        <div class="riddle-box">
          <p class="riddle">ğŸ”¤ Bringe die Buchstaben in die richtige Reihenfolge!<br><em>Klicke die Buchstaben der Reihe nach an.</em></p>
        </div>
        <div class="letter-answer" id="letter-answer">
          <div class="letter-slot" data-index="0"></div>
          <div class="letter-slot" data-index="1"></div>
          <div class="letter-slot" data-index="2"></div>
          <div class="letter-slot" data-index="3"></div>
          <div class="letter-slot" data-index="4"></div>
          <div class="letter-slot" data-index="5"></div>
          <div class="letter-slot" data-index="6"></div>
          <div class="letter-slot" data-index="7"></div>
          <div class="letter-slot" data-index="8"></div>
        </div>
        <div class="letter-pool" id="letter-pool"></div>
        <button onclick="resetLetters()" class="btn btn-secondary">ğŸ”„ ZurÃ¼cksetzen</button>
        <p id="error4" class="error hidden">Der Drache lacht... Das ist nicht richtig! ğŸ²</p>
        <div id="success4" class="success-box hidden">
          <p>âœ… <strong>ALEXANDER! Der Drache ist besiegt!</strong><br>Markgraf Alexander von Brandenburg-Ansbach. âš”ï¸</p>
        </div>
      </div>
    </section>

    <!-- STATION 5: CIPHER DECODER -->
    <section id="station5" class="screen">
      <div class="card">
        <div class="station-header">
          <span class="station-badge">Station 5 / 5</span>
          <div class="progress"><div class="progress-fill" style="width: 80%"></div></div>
        </div>
        <div class="icon">ğŸ†</div>
        <h2>Endgame<br><small>â€” Die letzte PrÃ¼fung â€”</small></h2>
        <div class="story-box">
          <p>Du hast alle PrÃ¼fungen bestanden! Nur noch ein letztes RÃ¤tsel...</p>
          <p>Ein verschlÃ¼sselter Text aus Brasilien wurde abgefangen. Du brauchst ein bisschen <strong>Portugiesisch</strong> und <strong>Kryptografie</strong>!</p>
          <p>Heute ist ein besonderer Tag â€” <strong>DEIN Tag</strong>. Die Nachricht wurde mit einer <strong>Caesar-VerschlÃ¼sselung</strong> codiert.</p>
        </div>
        <div class="riddle-box">
          <p class="riddle">ğŸ” EntschlÃ¼ssele die Nachricht!<br><em>Drehe am Rad, um den richtigen Versatz zu finden.</em></p>
        </div>
        <div class="cipher-display">
          <div class="cipher-label">VerschlÃ¼sselt:</div>
          <div class="cipher-text" id="cipher-encrypted">IHOLS DQLYHUVDULR</div>
          <div class="cipher-arrow">â¬‡ï¸</div>
          <div class="cipher-label">EntschlÃ¼sselt:</div>
          <div class="cipher-text cipher-decoded" id="cipher-decoded">IHOLS DQLYHUVDULR</div>
        </div>
        <div class="cipher-control">
          <label>Versatz (Shift):</label>
          <div class="cipher-slider">
            <button class="cipher-btn" onclick="adjustShift(-1)">â—€</button>
            <span class="cipher-value" id="shift-value">0</span>
            <button class="cipher-btn" onclick="adjustShift(1)">â–¶</button>
          </div>
          <div class="shift-range">
            <input type="range" id="shift-slider" min="0" max="25" value="0" oninput="setShift(parseInt(this.value))">
          </div>
        </div>
        <button onclick="checkCipher()" class="btn" id="cipher-check-btn">ğŸ”“ EntschlÃ¼sseln!</button>
        <p id="error5" class="error hidden">Das ergibt keinen Sinn... Dreh weiter am Rad! ğŸ”</p>
        <div id="success5" class="success-box hidden">
          <p>âœ… <strong>FELIZ ANIVERSÃRIO!</strong><br>Alles Gute zum Geburtstag auf Portugiesisch! ğŸ‡§ğŸ‡·ğŸ‚</p>
        </div>
      </div>
    </section>

    <!-- FINAL REVEAL -->
    <section id="finale" class="screen">
      <div class="card finale-card">
        <div class="confetti-container" id="confetti"></div>
        <div class="icon big">ğŸ‰</div>
        <h1>Quest Complete!</h1>
        <div class="progress"><div class="progress-fill" style="width: 100%"></div></div>
        <div class="birthday-message">
          <h2>ğŸ‚ Alles Gute zum 45. Geburtstag, Michi! ğŸ‚</h2>
          <p>Du hast es geschafft â€” alle 5 Stationen gemeistert! Von Erlangens Hugenotten-Geschichte Ã¼ber brasilianische Buchten, Cocktails in der VR-Taverne, bis zum Kampf gegen den Wissensdrachen!</p>
          <p>45 Jahre voller Abenteuer, und es gibt noch so viele Level vor dir. ğŸ®</p>
          <p>MÃ¶ge dein nÃ¤chstes Lebensjahr voller <strong>Critical Hits</strong>, epischer Loot-Drops und legendÃ¤rer Quests sein â€” ob in der echten Welt, in VR, oder beim nÃ¤chsten Geocache!</p>
          <p class="signature">ğŸ® Feliz AniversÃ¡rio! ğŸ‡§ğŸ‡·ğŸ‡©ğŸ‡ª<br><br>â€” Mit Liebe von Jose und Judi â¤ï¸</p>
        </div>
        <div class="achievement">
          <span class="achievement-badge">ğŸ…</span>
          <div>
            <strong>Achievement Unlocked!</strong><br>
            <em>â€SchatzjÃ¤ger Level 45"</em>
          </div>
        </div>
        <button onclick="resetQuest()" class="btn btn-secondary" style="margin-top:1.5rem;">ğŸ”„ Quest nochmal spielen</button>
      </div>
    </section>
  </div>

  <script src="script.js?v=3"></script>
</body>
</html>
